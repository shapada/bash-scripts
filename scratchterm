#!/usr/bin/env bash
   
id=$(xdotool search --classname "scratchterm")

if [ -z "$id" ]; then
   urxvt -name scratchterm -e zsh -c "tmux new-session -A -s dummy"
   exec i3-msg [instance="scratchterm"] move to scratchpad, move to position 20px 20px, resize set 98ppt 50ppt
else
  action='hide';

  if [[ $(xprop -id $id | awk '/window state: / {print $3}') == 'Withdrawn' ]]; then
    action='show';
  fi

  xdo $action -t "$id"
fi

exec i3-msg [instance="scratchterm"] scratchpad show